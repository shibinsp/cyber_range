# =============================================================================
# RetroRange - Environment Configuration Template
# =============================================================================
# Copy this file to .env and update with your values
# NEVER commit .env to version control!

# =============================================================================
# APPLICATION
# =============================================================================
APP_NAME=RetroRange
APP_ENV=development  # development | staging | production
DEBUG=true
LOG_LEVEL=INFO  # DEBUG | INFO | WARNING | ERROR | CRITICAL

# =============================================================================
# DATABASE (PostgreSQL)
# =============================================================================
# Database connection string (async)
DATABASE_URL=postgresql+asyncpg://postgres:shibin@localhost:5432/range

# Individual connection parameters (fallback)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=shibin
POSTGRES_DB=range

# Connection pool settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_RECYCLE=3600

# =============================================================================
# SECURITY
# =============================================================================
# Secret key for JWT signing (CHANGE IN PRODUCTION!)
# Generate with: openssl rand -hex 32
SECRET_KEY=09d25e094faa6ca2556c818166b7a9563b93f7099f6f0f4caa6cf63b88e8d3e7

# JWT settings
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7

# Password hashing
BCRYPT_ROUNDS=12

# CORS settings (comma-separated origins)
CORS_ORIGINS=http://localhost:5173,http://localhost:3000,https://retrorange.com

# =============================================================================
# REDIS
# =============================================================================
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# Cache TTL (seconds)
CACHE_TTL=300

# =============================================================================
# ELASTICSEARCH
# =============================================================================
ELASTICSEARCH_URL=http://localhost:9200
ELASTICSEARCH_USERNAME=elastic
ELASTICSEARCH_PASSWORD=

# Index settings
ES_INDEX_PREFIX=retrorange
ES_SHARD_COUNT=3
ES_REPLICA_COUNT=1

# =============================================================================
# KIBANA
# =============================================================================
KIBANA_URL=http://localhost:5601
KIBANA_USERNAME=elastic
KIBANA_PASSWORD=

# =============================================================================
# MINIO (S3-compatible Object Storage)
# =============================================================================
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_SECURE=false  # true for HTTPS
MINIO_BUCKET_NAME=retrorange-artifacts

# =============================================================================
# CELERY (Background Workers)
# =============================================================================
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=UTC

# Worker settings
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000

# =============================================================================
# ORCHESTRATION
# =============================================================================

# Terraform
TERRAFORM_BINARY_PATH=/usr/local/bin/terraform
TERRAFORM_WORKSPACE_DIR=/var/lib/retrorange/terraform
TERRAFORM_STATE_BACKEND=s3  # s3 | local | consul

# Ansible
ANSIBLE_BINARY_PATH=/usr/local/bin/ansible-playbook
ANSIBLE_INVENTORY_DIR=/etc/retrorange/ansible/inventory
ANSIBLE_PLAYBOOK_DIR=/etc/retrorange/ansible/playbooks

# =============================================================================
# ATTACK SIMULATION
# =============================================================================

# CALDERA
CALDERA_URL=http://localhost:8888
CALDERA_API_KEY=
CALDERA_API_VERSION=v2

# Sliver C2
SLIVER_URL=http://localhost:31337
SLIVER_API_KEY=
SLIVER_OPERATOR_NAME=retrorange

# =============================================================================
# PROXMOX (Hypervisor)
# =============================================================================
PROXMOX_HOST=
PROXMOX_USER=root@pam
PROXMOX_PASSWORD=
PROXMOX_VERIFY_SSL=false
PROXMOX_NODE=pve

# =============================================================================
# CLOUD PROVIDERS (for Terraform)
# =============================================================================

# AWS
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1

# GCP
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json
GOOGLE_PROJECT=
GOOGLE_REGION=us-central1

# Azure
AZURE_SUBSCRIPTION_ID=
AZURE_TENANT_ID=
AZURE_CLIENT_ID=
AZURE_CLIENT_SECRET=

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================

# Prometheus
PROMETHEUS_URL=http://localhost:9090

# Grafana
GRAFANA_URL=http://localhost:3001
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin

# Sentry (Error Tracking)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# =============================================================================
# ANALYTICS
# =============================================================================

# PostHog (Product Analytics)
POSTHOG_API_KEY=
POSTHOG_HOST=https://app.posthog.com

# Google Analytics
GA_MEASUREMENT_ID=

# =============================================================================
# EMAIL (for notifications, password reset)
# =============================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@retrorange.com
SMTP_FROM_NAME=RetroRange Platform

# =============================================================================
# STRIPE (Billing - if using)
# =============================================================================
STRIPE_PUBLIC_KEY=
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

# =============================================================================
# FEATURE FLAGS
# =============================================================================
ENABLE_MARKETPLACE=false
ENABLE_REPLAY=true
ENABLE_ADVANCED_SCORING=true
ENABLE_CALDERA=true
ENABLE_SLIVER=false
ENABLE_MULTI_TENANT=false

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# =============================================================================
# FILE UPLOAD
# =============================================================================
MAX_UPLOAD_SIZE_MB=100
ALLOWED_UPLOAD_EXTENSIONS=.pcap,.json,.zip,.tar.gz

# =============================================================================
# SESSION
# =============================================================================
SESSION_COOKIE_NAME=retrorange_session
SESSION_COOKIE_SECURE=false  # true for HTTPS only
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=lax  # lax | strict | none

# =============================================================================
# FRONTEND (for build-time injection)
# =============================================================================
VITE_API_BASE_URL=http://localhost:8000
VITE_WS_URL=ws://localhost:8000
VITE_APP_NAME=RetroRange
VITE_SENTRY_DSN=
VITE_POSTHOG_KEY=

# =============================================================================
# DEVELOPMENT
# =============================================================================
# Hot reload
BACKEND_RELOAD=true
FRONTEND_HMR=true

# Debug toolbar
ENABLE_DEBUG_TOOLBAR=true

# SQL logging
SQL_ECHO=false

# =============================================================================
# TESTING
# =============================================================================
TEST_DATABASE_URL=postgresql+asyncpg://postgres:shibin@localhost:5432/range_test
PYTEST_WORKERS=auto

# =============================================================================
# SECURITY HARDENING
# =============================================================================
# HTTPS enforcement (production)
FORCE_HTTPS=false

# HSTS (HTTP Strict Transport Security)
HSTS_ENABLED=false
HSTS_MAX_AGE=31536000

# CSP (Content Security Policy)
CSP_ENABLED=true
CSP_REPORT_ONLY=true

# =============================================================================
# BACKUP
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=retrorange-backups

# =============================================================================
# VAULT (Secrets Management)
# =============================================================================
VAULT_ENABLED=false
VAULT_URL=http://localhost:8200
VAULT_TOKEN=
VAULT_NAMESPACE=retrorange
